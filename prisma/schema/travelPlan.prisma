model TravelPlan {
  id           String        @id @default(uuid())
  title        String
  description  String?
  destination  String
  startDate    DateTime
  endDate      DateTime
  budgetRange  String
  travelType   TravelType
  visibility   Boolean       @default(true)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  travelerId   String
  traveler     Traveler      @relation(fields: [travelerId], references: [id])
  reviews      Review[]
  tripRequests TripRequest[]

  @@map("travelPlans")
}

model Review {
  id           String     @id @default(uuid())
  rating       Int
  comment      String?
  travelerId   String
  traveler     Traveler   @relation(fields: [travelerId], references: [id])
  travelPlanId String
  travelPlan   TravelPlan @relation(fields: [travelPlanId], references: [id])
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
}

model TripRequest {
  id           String        @id @default(uuid())
  travelPlanId String
  travelPlan   TravelPlan    @relation(fields: [travelPlanId], references: [id])
  travelerId   String
  traveler     Traveler      @relation(fields: [travelerId], references: [id])
  status       RequestStatus @default(PENDING)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  @@unique([travelPlanId, travelerId])
  @@map("tripRequests")
}

model Payment {
  id                 String        @id @default(uuid())
  amount             Float
  status             PaymentStatus
  subscription       String
  transactionId      String        @unique
  paymentGatewayData Json?
  travelerId         String
  traveler           Traveler      @relation(fields: [travelerId], references: [id])
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
}
